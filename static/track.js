var _goTracker=(()=>{var o=class{id="";siteId="";referrer="";isTouch=!1;constructor(t,e){this.siteId=t,this.referrer=e,this.isTouch="ontouchstart"in window||navigator.maxTouchPoints>0;let a=this.getSession("id");a&&(this.id=a)}getSession(t){t=`__got_${t}__`;let e=localStorage.getItem(t);return e?JSON.parse(e):null}setSession(t,e){t=`__got_${t}__`,localStorage.setItem(t,JSON.stringify(e))}identify(t){this.id=t,this.setSession("id",t)}track(t,e){let a={tracking:{type:e=="Page views"?"page":"event",identity:this.id,ua:navigator.userAgent,event:t,category:e,referrer:this.referrer,isTouchDevice:this.isTouch},site_id:this.siteId};this.trackRequest(a)}page(t){this.track(t,"Page views")}trackRequest(t){let e=new Blob([JSON.stringify(t)],{type:"application/json"});navigator.sendBeacon("http://localhost:9876/track",e)}};((i,t)=>{let e=t.currentScript?.dataset;if(!e||!e.siteid){console.error("you must have a data-siteid in your script tag.");return}let a=i.location.pathname,c="",s=t.referrer;s&&s.indexOf(`${i.location.protocol}//${i.location.host}`)==0&&(c=s);let r=new o(e.siteid,c);i._got=i._got||r,r.page(a);let n=window.history;if(n.pushState){let g=n.pushState;n.pushState=function(){g.apply(this,arguments),r.page(i.location.pathname)},window.addEventListener("popstate",()=>{r.page(i.location.pathname)})}i.addEventListener("hashchange",()=>{r.page(t.location.hash)},!1)})(window,document);})();
